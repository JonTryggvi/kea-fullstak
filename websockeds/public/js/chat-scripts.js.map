{"version":3,"sources":["global.js","chat.js"],"names":["$","on","e","keyCode","which","preventDefault","click","whatBrowser","nVer","navigator","appVersion","nAgt","userAgent","browserName","appName","fullVersion","parseFloat","majorVersion","parseInt","nameOffset","verOffset","ix","indexOf","substring","lastIndexOf","toLowerCase","toUpperCase","isNaN","sHostName","window","location","hostname","serverLoactation","socket","io","jData","aActiveUsers","activeUsers","elActiveLi","id","name","insertAdjacentHTML","send","localStorage","userId","browserImg","messages","sMessageDisplay","sentBrowser","userBrowser","localUserId","msgUserId","thisBrowser","senderClass","sMessage","message","userName","innerHTML","stop","animate","scrollTop","scrollHeight","connStatus","status","sBrowser","browserData","emit","document","body","css","val","sModMessage","replace","sMessageAndUserData","post","data","attr","remove","origin"],"mappings":"AAAAA,EAAE,MAAF,EAAUC,EAAV,CAAa,OAAb,EAAsB,UAAUC,CAAV,EAAa;AACjC,MAAIC,UAAUD,EAAEC,OAAF,IAAaD,EAAEE,KAA7B;AACA,MAAID,YAAY,EAAhB,EAAoB;AAClBD,MAAEG,cAAF;AACAL,MAAE,aAAF,EAAiBM,KAAjB;AACA,WAAO,KAAP;AACD;AACF,CAPD;AAQA;AACAN,EAAE,MAAF,EAAUC,EAAV,CAAa,UAAb,EAAyB,UAAUC,CAAV,EAAa;AACpC,MAAIC,UAAUD,EAAEC,OAAF,IAAaD,EAAEE,KAA7B;AACA,MAAID,YAAY,EAAhB,EAAoB;AAClBD,MAAEG,cAAF;AACA;AACE,WAAO,KAAP;AACH;AACF,CAPD;;AASA,SAASE,WAAT,GAAuB;AACrB,MAAIC,OAAOC,UAAUC,UAArB;AACA,MAAIC,OAAOF,UAAUG,SAArB;AACA,MAAIC,cAAcJ,UAAUK,OAA5B;AACA,MAAIC,cAAc,KAAKC,WAAWP,UAAUC,UAArB,CAAvB;AACA,MAAIO,eAAeC,SAAST,UAAUC,UAAnB,EAA+B,EAA/B,CAAnB;AACA,MAAIS,UAAJ;AACA,MAAIC,SAAJ;AACA,MAAIC,EAAJ;;AAEA;AACA,MAAI,CAACD,YAAYT,KAAKW,OAAL,CAAa,OAAb,CAAb,MAAwC,CAAC,CAA7C,EAAgD;AAC9CT,kBAAc,OAAd;AACAE,kBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACA,QAAI,CAACA,YAAYT,KAAKW,OAAL,CAAa,SAAb,CAAb,MAA0C,CAAC,CAA/C,EAAkD;AAChDP,oBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACD;AACD;AACD,GAPD,MAOO,IAAI,CAACA,YAAYT,KAAKW,OAAL,CAAa,MAAb,CAAb,MAAuC,CAAC,CAA5C,EAA+C;AACpDT,kBAAc,6BAAd;AACAE,kBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACA;AACD,GAJM,MAIA,IAAI,CAACA,YAAYT,KAAKW,OAAL,CAAa,QAAb,CAAb,MAAyC,CAAC,CAA9C,EAAiD;AACtDT,kBAAc,QAAd;AACAE,kBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACA;AACD,GAJM,MAIA,IAAI,CAACA,YAAYT,KAAKW,OAAL,CAAa,QAAb,CAAb,MAAyC,CAAC,CAA9C,EAAiD;AACtDT,kBAAc,QAAd;AACAE,kBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACA,QAAI,CAACA,YAAYT,KAAKW,OAAL,CAAa,SAAb,CAAb,MAA0C,CAAC,CAA/C,EAAkD;AAChDP,oBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACD;AACD;AACD,GAPM,MAOA,IAAI,CAACA,YAAYT,KAAKW,OAAL,CAAa,SAAb,CAAb,MAA0C,CAAC,CAA/C,EAAkD;AACvDT,kBAAc,SAAd;AACAE,kBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACA;AACD,GAJM,MAIA,IAAI,CAACD,aAAaR,KAAKa,WAAL,CAAiB,GAAjB,IAAwB,CAAtC,KACRJ,YAAYT,KAAKa,WAAL,CAAiB,GAAjB,CADJ,CAAJ,EACgC;AACrCX,kBAAcF,KAAKY,SAAL,CAAeJ,UAAf,EAA2BC,SAA3B,CAAd;AACAL,kBAAcJ,KAAKY,SAAL,CAAeH,YAAY,CAA3B,CAAd;AACA,QAAIP,YAAYY,WAAZ,OAA8BZ,YAAYa,WAAZ,EAAlC,EAA6D;AAC3Db,oBAAcJ,UAAUK,OAAxB;AACD;AACF;AACD;AACA,MAAI,CAACO,KAAKN,YAAYO,OAAZ,CAAoB,GAApB,CAAN,MAAoC,CAAC,CAAzC,EAA4C;AAC1CP,kBAAcA,YAAYQ,SAAZ,CAAsB,CAAtB,EAAyBF,EAAzB,CAAd;AACD;AACD,MAAI,CAACA,KAAKN,YAAYO,OAAZ,CAAoB,GAApB,CAAN,MAAoC,CAAC,CAAzC,EAA4C;AAC1CP,kBAAcA,YAAYQ,SAAZ,CAAsB,CAAtB,EAAyBF,EAAzB,CAAd;AACD;;AAEDJ,iBAAeC,SAAS,KAAKH,WAAd,EAA2B,EAA3B,CAAf;AACA,MAAIY,MAAMV,YAAN,CAAJ,EAAyB;AACvBF,kBAAc,KAAKC,WAAWP,UAAUC,UAArB,CAAnB;AACAO,mBAAeC,SAAST,UAAUC,UAAnB,EAA+B,EAA/B,CAAf;AACD;AACD;;AAEA,SAAOG,WAAP;AAED;;AAGD;AACA,IAAIe,YAAYC,OAAOC,QAAP,CAAgBC,QAAhC;AACA,IAAIC,gBAAJ;AACA,IAAIJ,aAAa,WAAb,IAA4BA,aAAa,YAA7C,EAA4D;AAC1DI,qBAAmB,iBAAnB;AACD,CAFD,MAEO;AACLA,qBAAmB,oBAAnB;AACD;;AAGD,IAAIC,SAASC,GAAG,oBAAH,CAAb;CC7FAD,OAAOhC,EAAP,CAAU,aAAV,EAAyB,UAAUkC,KAAV,EAAiB;AACxC;AACA,MAAIC,eAAeD,MAAME,WAAzB;AACA;;AAEA,MAAIC,aAAa,yCAAuCF,aAAaG,EAApD,GAAuD,IAAvD,GAA8DH,aAAaI,IAA3E,GAAiF,OAAlG;AACAH,cAAYI,kBAAZ,CAA+B,WAA/B,EAA4CH,UAA5C;;AAIA;AACD,CAXD;AAYAL,OAAOS,IAAP,CAAY,YAAZ,EAA0B,EAAE,UAAUC,aAAaC,MAAzB,EAA1B;AACAX,OAAOhC,EAAP,CAAU,MAAV,EAAkB,UAAUkC,KAAV,EAAiB;AACjC,MAAIU,aAAa,EAAjB;AACA;;AAEA,MAAIC,WAAWC,eAAf;AACA,MAAIC,cAAcb,MAAMc,WAAxB;AACA,MAAIC,cAAcrB,OAAOc,YAAP,CAAoBC,MAAtC;AACA,MAAIO,YAAYhB,MAAMS,MAAtB;AACA,MAAIQ,cAAc7C,aAAlB;AACA,MAAI8C,cAAcH,eAAeC,SAAf,GAA2B,aAA3B,GAA2C,UAA7D;AACA;AACA;AACA,UAAQE,WAAR;AACE,SAAK,aAAL;AACEC,iBAAW,wBAAwBD,WAAxB,GAAsC,SAAtC,GAAkDlB,MAAMoB,OAAxD,GAAkE,YAAlE,GAAiFpB,MAAMqB,QAAvF,GAAkG,cAA7G;AACA;AACF,SAAK,UAAL;AACEF,iBAAW,wBAAwBD,WAAxB,GAAsC,UAAtC,GAAmDlB,MAAMqB,QAAzD,GAAoE,cAApE,GAAqFrB,MAAMoB,OAA3F,GAAqG,WAAhH;AACA;;AAEF;AACE;AATJ;AAWAT,WAASW,SAAT,IAAsBH,QAAtB;AACAtD,IAAE,kBAAF,EAAsB0D,IAAtB,GAA6BC,OAA7B,CAAqC,EAAEC,WAAW5D,EAAE,kBAAF,EAAsB,CAAtB,EAAyB6D,YAAtC,EAArC,EAA2F,IAA3F;AACD,CAzBD;;AA4BA5B,OAAOhC,EAAP,CAAU,aAAV,EAAyB,UAAUkC,KAAV,EAAiB;AACxC;AACA2B,aAAWL,SAAX,GAAuB,aAAatB,MAAM4B,MAA1C;AACAC,aAAWzD,aAAX;AACA,MAAIqC,SAASD,aAAaC,MAA1B;AACA;AACA,MAAIqB,cAAc;AAChB,eAAWD,QADK;AAEhB,cAAUpB;AAFM,GAAlB;AAIAX,SAAOiC,IAAP,CAAY,aAAZ,EAA2BD,WAA3B;AACA,MAAIpB,aAAa,EAAjB;AACA,UAAQmB,QAAR;AACE,SAAK,QAAL;AACEnB,mBAAa,iBAAb;AACA;AACA;AACF,SAAK,QAAL;AACEA,mBAAa,iBAAb;AACA;AACA;AACF,SAAK,SAAL;AACEA,mBAAa,kBAAb;AACA;AACA;AACF;AACE;AAdJ;;AAiBA7C,IAAEmE,SAASC,IAAX,EAAiBC,GAAjB,CAAqB,kBAArB,EAAyC,SAASxB,UAAT,GAAsB,GAA/D;AACD,CA9BD;;AAgCA7C,EAAE,UAAF,EAAcM,KAAd,CAAoB,YAAY;AAC9B;AACA,MAAIgD,WAAWtD,EAAE,aAAF,EAAiBsE,GAAjB,EAAf;AACA;AACA,MAAIC,cAAcjB,SACfkB,OADe,CACP,IADO,EACD,UADC,EAEfA,OAFe,CAEP,KAFO,EAEA,UAFA,EAGfA,OAHe,CAGP,KAHO,EAGA,UAHA,EAIfA,OAJe,CAIP,IAJO,EAID,UAJC,EAKfA,OALe,CAKP,KALO,EAKA,UALA,EAMfA,OANe,CAMP,KANO,EAMA,UANA,EAOfA,OAPe,CAOP,IAPO,EAOD,UAPC,EAQfA,OARe,CAQP,MARO,EAQC,UARD,EASfA,OATe,CASP,IATO,EASD,UATC,CAAlB;AAUA,MAAIvB,cAAc1C,aAAlB;AACA,MAAIkE,sBAAsB,EAAE,WAAWF,WAAb,EAA0B,UAAU5B,aAAaC,MAAjD,EAAyD,eAAeK,WAAxE,EAA1B;AACAhB,SAAOiC,IAAP,CAAY,cAAZ,EAA4BO,mBAA5B;AACA;AACAzE,IAAE,aAAF,EAAiBsE,GAAjB,CAAqB,EAArB;AACD,CAnBD;;AAqBAtE,EAAE,YAAF,EAAgBM,KAAhB,CAAsB,YAAY;AAChC,MAAIsC,SAASf,OAAOc,YAAP,CAAoBC,MAAjC;AACA5C,IAAE0E,IAAF,CAAO,SAAP,EAAkB,EAAE,UAAU9B,MAAZ,EAAlB,EAAwC,UAAU+B,IAAV,EAAgB;AACtD;AACA,QAAIA,IAAJ,EAAU;AACR,UAAI/B,UAAU5C,EAAE,aAAF,EAAiB4E,IAAjB,CAAsB,aAAtB,CAAd,EAAoD;AAClD5E,UAAE,aAAF,EAAiB6E,MAAjB;AACD;AACDlC,mBAAaC,MAAb,GAAsB,EAAtB;AACAd,eAAS0C,OAAT,CAAiB1C,SAASgD,MAA1B;AACD;AACF,GATD;AAUD,CAZD","file":"chat-scripts.js","sourcesContent":["$('form').on('keyup', function (e) {\n  var keyCode = e.keyCode || e.which;\n  if (keyCode === 13) {\n    e.preventDefault();\n    $('form button').click();\n    return false;\n  }\n});\n// just to be sure that forms wont do anything unwanted I added the keaypress listener\n$('form').on('keypress', function (e) {\n  var keyCode = e.keyCode || e.which;\n  if (keyCode === 13) {\n    e.preventDefault();\n    // $('form button').click();\n      return false;\n  }\n});\n\nfunction whatBrowser() {\n  var nVer = navigator.appVersion;\n  var nAgt = navigator.userAgent;\n  var browserName = navigator.appName;\n  var fullVersion = '' + parseFloat(navigator.appVersion);\n  var majorVersion = parseInt(navigator.appVersion, 10);\n  var nameOffset;\n  var verOffset;\n  var ix;\n\n  // In Opera, the true version is after \"Opera\" or after \"Version\"\n  if ((verOffset = nAgt.indexOf('Opera')) !== -1) {\n    browserName = 'Opera';\n    fullVersion = nAgt.substring(verOffset + 6);\n    if ((verOffset = nAgt.indexOf('Version')) !== -1) {\n      fullVersion = nAgt.substring(verOffset + 8);\n    }\n    // return browserName;\n  } else if ((verOffset = nAgt.indexOf('MSIE')) !== -1) {\n    browserName = 'Microsoft Internet Explorer';\n    fullVersion = nAgt.substring(verOffset + 5);\n    // return browserName;\n  } else if ((verOffset = nAgt.indexOf('Chrome')) !== -1) {\n    browserName = 'Chrome';\n    fullVersion = nAgt.substring(verOffset + 7);\n    // return browserName;\n  } else if ((verOffset = nAgt.indexOf('Safari')) !== -1) {\n    browserName = 'Safari';\n    fullVersion = nAgt.substring(verOffset + 7);\n    if ((verOffset = nAgt.indexOf('Version')) !== -1) {\n      fullVersion = nAgt.substring(verOffset + 8);\n    }\n    // return browserName;\n  } else if ((verOffset = nAgt.indexOf('Firefox')) !== -1) {\n    browserName = 'Firefox';\n    fullVersion = nAgt.substring(verOffset + 8);\n    // return browserName;\n  } else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) <\n    (verOffset = nAgt.lastIndexOf('/'))) {\n    browserName = nAgt.substring(nameOffset, verOffset);\n    fullVersion = nAgt.substring(verOffset + 1);\n    if (browserName.toLowerCase() === browserName.toUpperCase()) {\n      browserName = navigator.appName;\n    }\n  }\n  // trim the fullVersion string at semicolon/space if present\n  if ((ix = fullVersion.indexOf(';')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n  if ((ix = fullVersion.indexOf(' ')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n\n  majorVersion = parseInt('' + fullVersion, 10);\n  if (isNaN(majorVersion)) {\n    fullVersion = '' + parseFloat(navigator.appVersion);\n    majorVersion = parseInt(navigator.appVersion, 10);\n  }\n  // console.log(browserName);\n\n  return browserName;\n\n}\n\n\n// console.log(window.location.hostname);\nvar sHostName = window.location.hostname;\nvar serverLoactation;\nif (sHostName == 'localhost' || sHostName == '10.0.0.209' ) {\n  serverLoactation = \"10.0.0.209:3000\";\n} else {\n  serverLoactation = '18.216.169.68:3000';\n}\n\n\nvar socket = io(\"10.111.176.30:3000\");","socket.on('activeUsers', function (jData) {\n  // console.log(jData);\n  var aActiveUsers = jData.activeUsers;\n  // console.log(aActiveUsers);\n\n  var elActiveLi = '<li class=\"activeUser\" data-userid=\"'+aActiveUsers.id+'\">' + aActiveUsers.name +'</li>';\n  activeUsers.insertAdjacentHTML('beforeend', elActiveLi);\n \n  \n\n  // activeUsers.innerHTML = sUserItem;\n});\nsocket.send('connection', { \"userId\": localStorage.userId });\nsocket.on('chat', function (jData) {\n  var browserImg = '';\n  // console.log(jData);\n  \n  var messages = sMessageDisplay;\n  var sentBrowser = jData.userBrowser; \n  var localUserId = window.localStorage.userId;\n  var msgUserId = jData.userId;\n  var thisBrowser = whatBrowser();\n  var senderClass = localUserId != msgUserId ? 'externalMsg' : 'localMsg';\n  // console.log(senderClass);\n  // console.log(jData);\n  switch (senderClass) {\n    case 'externalMsg':\n      sMessage = '<li class=\"message ' + senderClass + '\">  <p>' + jData.message + '</p><span>' + jData.userName + '</span></li>';\n      break;\n    case 'localMsg':\n      sMessage = '<li class=\"message ' + senderClass + '\"><span>' + jData.userName + '</span>  <p>' + jData.message + '</p></li>';\n      break;\n  \n    default:\n      break;\n  }\n  messages.innerHTML += sMessage;\n  $(\".sMessageDisplay\").stop().animate({ scrollTop: $(\".sMessageDisplay\")[0].scrollHeight }, 1000);\n});\n\n\nsocket.on('isConnected', function (jData) {\n  // console.log(jData);  \n  connStatus.innerHTML = 'status: ' + jData.status;\n  sBrowser = whatBrowser();\n  var userId = localStorage.userId;\n  // console.log(userId);\n  var browserData = {\n    \"browser\": sBrowser,\n    \"userId\": userId \n  };\n  socket.emit('whatBrowser', browserData);\n  var browserImg = '';\n  switch (sBrowser) {\n    case 'Chrome':\n      browserImg = '/img/chrome.png';\n      // browserIcon.innerHTML = browserImg;\n      break;\n    case 'Safari':\n      browserImg = '/img/safari.png';\n      // browserIcon.innerHTML = browserImg;\n      break;\n    case 'Firefox':\n      browserImg = '/img/firefox.png';\n      // browserIcon.innerHTML = browserImg;\n      break;\n    default:\n      break;\n  }\n \n  $(document.body).css('background-image', 'url(' + browserImg + ')');\n});\n\n$('#btnSend').click(function () {\n  // console.dir(window);\n  var sMessage = $('#txtMessage').val();\n  // console.log(sMessage);\n  var sModMessage = sMessage\n    .replace(':)', '&#x1F603')\n    .replace(': )', '&#x1F603')\n    .replace(':-)', '&#x1F603')\n    .replace('(:', '&#x1F603')\n    .replace('( :', '&#x1F603')\n    .replace('(-:', '&#x1F603')\n    .replace(';)', '&#x1f609')\n    .replace(':\\')', '&#x1f622')\n    .replace(':)', '&#x1f622');\n  var userBrowser = whatBrowser();\n  var sMessageAndUserData = { \"message\": sModMessage, \"userId\": localStorage.userId, \"userBrowser\": userBrowser };\n  socket.emit('grabbMessage', sMessageAndUserData);\n  // $(\".sMessageDisplay\").stop().animate({ scrollTop: $(\".sMessageDisplay\")[0].scrollHeight }, 1000);\n  $('#txtMessage').val('');\n});\n\n$('#btnLogout').click(function () {\n  var userId = window.localStorage.userId;\n  $.post('/logout', { \"userId\": userId }, function (data) {\n    // console.log(data);\n    if (data) {\n      if (userId == $('.activeUser').attr('data-userid')) {\n        $('.activeUser').remove();\n      }\n      localStorage.userId = '';\n      location.replace(location.origin);\n    }\n  });\n});\n\n"]}